<h2>List of Products</h2>

{{#each payload}}
  <div>
    <h3>{{this.title}}</h3>
    <p>Price: ${{this.price}}</p>
    <p>Category: {{this.category}}</p>

    <!-- Option 1: Link to view full details -->
    <a href="/products/{{_id}}">View Details</a>

    <!-- Option 2: Button to add to cart -->
    <form action="/carts/add-to-cart" method="post">
      <input type="hidden" name="productId" value="{{_id}}" />
      <input type="submit" value="Add to Cart" />
    </form>
  </div>
{{/each}}

<!-- Add a form for user input -->
<form action="/products" method="get">
  <!-- Input field for page -->
  <label for="page">Page:</label>
  <input
    type="number"
    id="page"
    name="page"
    min="1"
    max="{{totalPages}}"
    value="{{page}}"
  />

  <!-- Input field for limit -->
  <label for="limit">Limit:</label>
  {{#if limit}}
    <input
      type="number"
      id="limit"
      name="limit"
      min="1"
      max="20"
      value="{{limit}}"
    />
  {{else}}
    <input type="number" id="limit" name="limit" min="1" max="20" value="10" />
  {{/if}}

  <!-- Dropdown for sort -->
  <label for="sort">Sort:</label>
  <select id="sort" name="sort">
    <option value="">-- No Sort --</option>
    <option value="asc">Ascending</option>
    <option value="desc">Descending</option>
  </select>

  <!-- Checkbox group for categories -->
  <label>Categories:</label>
  {{#each categories}}
    <input type="checkbox" name="query" id="{{this}}" value="{{this}}" {{isInArray this ../query 'checked'}}>
    <label for="{{this}}">{{this}}</label>
  {{/each}}

  <!-- Submit button -->
  <input type="submit" value="Apply Filters" />
</form>

<!-- Your existing pagination links -->

{{#if prevLink}}
  <a href="{{prevLink}}">Previous Page</a>
{{/if}}

<!-- Display the current page -->
{{#if page}}
  <span>Page {{page}}</span>
{{/if}}

{{#if nextLink}}
  <a href="{{nextLink}}">Next Page</a>
{{/if}}